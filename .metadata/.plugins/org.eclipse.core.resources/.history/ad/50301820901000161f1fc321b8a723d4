package com.aiss.omnidrive.client.views.drive;

import org.apache.xpath.patterns.ContextMatchStepPattern;

import com.aiss.omnidrive.client.rpc.DriveService;
import com.aiss.omnidrive.client.rpc.DriveServiceAsync;
import com.aiss.omnidrive.client.rpc.OAuthService;
import com.aiss.omnidrive.client.rpc.OAuthServiceAsync;
import com.aiss.omnidrive.shared.drive.files.DriveFile;
import com.google.gwt.core.client.GWT;
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.event.dom.client.ClickHandler;
import com.google.gwt.event.dom.client.ContextMenuEvent;
import com.google.gwt.event.dom.client.ContextMenuHandler;
import com.google.gwt.event.dom.client.DoubleClickEvent;
import com.google.gwt.event.dom.client.DoubleClickHandler;
import com.google.gwt.user.client.Window;
import com.google.gwt.user.client.ui.Composite;
import com.google.gwt.user.client.ui.FlowPanel;
import com.google.gwt.user.client.ui.HTML;
import com.google.gwt.user.client.ui.Panel;

public class DriveFileView extends Composite {

	private final OAuthServiceAsync oauthService = GWT.create(OAuthService.class);
	private final DriveServiceAsync driveService = GWT.create(DriveService.class);
	
	public DriveFileView(final DriveFile file){
		HTML fileView;
		Panel fileContent;
			
		fileView = new HTML();
		fileContent = new FlowPanel();
		fileContent.addStyleName("fileContent");
		fileContent.add(new HTML(file.getName()));
		
		fileView.setHTML(fileContent.toString());
		fileView.addStyleName("fileView");
		
		if (file.isDirectory()) {
			fileView.addDoubleClickHandler(new DoubleClickHandler() {
				
				@Override
				public void onDoubleClick(DoubleClickEvent event) {
					// TODO Auto-generated method stub
					Window.alert("Accediendo" + file.getName());
				}
			});
			fileView.addHandler(new ContextMenuHandler() {
				
				@Override
				public void onContextMenu(ContextMenuEvent event) {
					// TODO Auto-generated method stub
					
				}
			});
		}
		
		initWidget(fileView);
	}
	
}
